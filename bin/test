#!/bin/bash

# test script
#
# This script runs all PHPUnit and BeHat tests

# VARIABLES
# Grab the command flags passed as arguments
options=$@
arguments=($options)
index=0

# Set flag defaults
webroot="webroot"

# Set passed flags
for argument in $options
  do
    # Incrementing index
    index=`expr $index + 1`

    # The conditions
    case $argument in
      -webroot)
        webroot=${arguments[index]} ;;
    esac
done

# Change into the webroot
cd ${webroot}

# Enable simpletest module
drush en --yes simpletest

# Set the simpletest_verbose variabel to false. We don't need to log this. Travis handles that.
drush vset --yes simpletest_verbose FALSE

# Run your tests
drush test-run DrupalHTTPRequestTestCase http://127.0.0.1:8080 # Example. Use drush test-run to see all available.
